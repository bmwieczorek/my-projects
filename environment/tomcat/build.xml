<project name="MyProject" default="build" basedir=".">
    <description>Build base catalina from scratch</description>
    <!-- set global properties for this build -->
    <property name="catalina.home" location="apache-tomcat-6.0.26"/>
    <property name="catalina.base" location="DEV-catalina-base"/>

    <target name="build" description="build catalina base" >
        <mkdir dir="${catalina.base}" />
        <mkdir dir="${catalina.base}/bin" />
        <mkdir dir="${catalina.base}/conf" />
        <mkdir dir="${catalina.base}/logs" />
        <mkdir dir="${catalina.base}/temp" />
        <mkdir dir="${catalina.base}/webapps" />
        <mkdir dir="${catalina.base}/work" />
        <copy file="${catalina.home}/conf/server.xml" todir="${catalina.base}/conf"/>
        <copy file="${catalina.home}/conf/web.xml" todir="${catalina.base}/conf"/>
        <copy todir="${catalina.base}/webapps/ROOT">
            <fileset dir="${catalina.home}/webapps/ROOT"/>
        </copy>
        <echo file="${catalina.base}/conf/tomcat-users.xml" >
            <![CDATA[
            <?xml version='1.0' encoding='utf-8'?>
            <tomcat-users>
                <role rolename="manager"/>
                <user username="admin" password="" roles="manager"/>
            </tomcat-users>
            ]]>
        </echo>
    </target>

    <target name="clean" description="clean up" >
        <delete dir="${catalina.base}"/>
    </target>
</project>
